# final-fix.yaml - CORREÇÃO DE SINTAXE

watchAnyNamespace: false
watchNamespaces: ["kafka"]

resources:
  limits:
    memory: 1Gi
    cpu: 1000m
  requests:
    memory: 512Mi
    cpu: 500m

extraEnvs:
  # O FORMATO CORRETO É OBRIGATÓRIO: major=X,minor=Y
  # O erro "Failed to parse Map" aconteceu porque usamos apenas "1.30"
  - name: STRIMZI_KUBERNETES_VERSION
    value: "major=1,minor=30"
  
  # Tolerância para evitar bloqueio de thread
  - name: STRIMZI_VERTX_BLOCKING_EXCEPTION_THRESHOLD_MS
    value: "60000"
    
  - name: STRIMZI_LOG_LEVEL
    value: "INFO"

livenessProbe:
  initialDelaySeconds: 120
  timeoutSeconds: 30
readinessProbe:
  initialDelaySeconds: 120
  timeoutSeconds: 30